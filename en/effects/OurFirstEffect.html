<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Our first Effect | Hyperion</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="/icons/favicon-128x128.png">
    <link rel="icon" type="image/ico" href="/icons/favicon.ico">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-828x1792.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1125x2436.png">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1242x2688.png">
    <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-750x1334.png">
    <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)" href="/icons/apple-launch-1242x2208.png">
    <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-640x1136.png">
    <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1536x2048.png">
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1668x2224.png">
    <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-1668x2388.png">
    <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" href="/icons/apple-launch-2048x2732.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/icons/apple-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#fff">
    <meta name="description" content="Hyperion Ambient Light documentation">
    <meta name="theme-color" content="#2b81a0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Hyperion Documentation">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#2b81a0">
    <link rel="preload" href="/assets/css/0.styles.83e9b54b.css" as="style"><link rel="preload" href="/assets/js/app.a7719aba.js" as="script"><link rel="preload" href="/assets/js/2.16f09a8a.js" as="script"><link rel="preload" href="/assets/js/17.9ec82d3f.js" as="script"><link rel="preload" href="/assets/js/6.9367514b.js" as="script"><link rel="preload" href="/assets/js/4.a333783b.js" as="script"><link rel="prefetch" href="/assets/js/10.23f56594.js"><link rel="prefetch" href="/assets/js/11.f9d93b39.js"><link rel="prefetch" href="/assets/js/12.d089833a.js"><link rel="prefetch" href="/assets/js/13.6f012652.js"><link rel="prefetch" href="/assets/js/14.9ef182a3.js"><link rel="prefetch" href="/assets/js/15.ac53e7e0.js"><link rel="prefetch" href="/assets/js/16.d48b21fc.js"><link rel="prefetch" href="/assets/js/18.70f7fe92.js"><link rel="prefetch" href="/assets/js/19.f0c828a3.js"><link rel="prefetch" href="/assets/js/20.f8a7213c.js"><link rel="prefetch" href="/assets/js/21.e7e6de69.js"><link rel="prefetch" href="/assets/js/22.8e0cabd1.js"><link rel="prefetch" href="/assets/js/23.0aa9488e.js"><link rel="prefetch" href="/assets/js/24.5f7b667f.js"><link rel="prefetch" href="/assets/js/25.78e480e8.js"><link rel="prefetch" href="/assets/js/26.edc2a867.js"><link rel="prefetch" href="/assets/js/27.e6ea72f6.js"><link rel="prefetch" href="/assets/js/28.6af3c074.js"><link rel="prefetch" href="/assets/js/29.473d6f8f.js"><link rel="prefetch" href="/assets/js/3.d2a9a079.js"><link rel="prefetch" href="/assets/js/30.81b5c05b.js"><link rel="prefetch" href="/assets/js/31.983dc35c.js"><link rel="prefetch" href="/assets/js/32.48c0800f.js"><link rel="prefetch" href="/assets/js/5.47840f41.js"><link rel="prefetch" href="/assets/js/7.b7ccec3b.js"><link rel="prefetch" href="/assets/js/8.926dd2a7.js"><link rel="prefetch" href="/assets/js/9.131f33d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83e9b54b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/hyperion-logo.png" alt="Hyperion" class="logo"> <span class="site-name can-hide">Hyperion</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/user/" class="nav-link">
  User
</a></div><div class="nav-item"><a href="/en/effects/" class="nav-link router-link-active">
  Effects
</a></div><div class="nav-item"><a href="/en/json/" class="nav-link">
  Json API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/effects/OurFirstEffect.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/en/user/" class="nav-link">
  User
</a></div><div class="nav-item"><a href="/en/effects/" class="nav-link router-link-active">
  Effects
</a></div><div class="nav-item"><a href="/en/json/" class="nav-link">
  Json API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/effects/OurFirstEffect.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Effects</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/effects/" class="sidebar-link">Effect development</a></li><li><a href="/en/effects/API.html" class="sidebar-link">Effect Engine API</a></li><li><a href="/en/effects/OurFirstEffect.html" class="active sidebar-link">Our first Effect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#requirements" class="sidebar-link">Requirements</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#start" class="sidebar-link">Start</a></li><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#add-color-option" class="sidebar-link">Add color option</a></li><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#more-dots" class="sidebar-link">More dots!</a></li><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#more-color" class="sidebar-link">More color</a></li><li class="sidebar-sub-header"><a href="/en/effects/OurFirstEffect.html#clear-the-image" class="sidebar-link">Clear the image</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Effects UI</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/api/Ui.html" class="sidebar-link">Graphical User Interface</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="our-first-effect"><a href="#our-first-effect" class="header-anchor">#</a> Our first Effect</h1> <p>Let's create together our first effect! <br>
Target of this effect is to show the general structure of an effect, make you confident with the api and workflow.</p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <ul><li>An installed and running Hyperion. You need access to the filesystem where Hyperion has been installed.</li> <li>Texteditor (of your liking, i would recommend <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>Navigate to the &quot;custom-effects&quot; folder of your Hyperion installation (Inside .hyperion folder of your home directory)</li> <li><strong>Configure a led matrix layout at &quot;LED Hardware&quot;-section at the web configuration to 10x10 LEDs</strong></li></ul> <h3 id="start"><a href="#start" class="header-anchor">#</a> Start</h3> <p>First, we start with the python file. Create a new file called <code>neweffect.py</code> in your <code>custom-effects</code> folder. <br>
We need to import some modules, <code>hyperion</code> and <code>time</code> is always required. The time module comes from Python, if you want to know, what methods such a module has, visit the <a href="https://docs.python.org/3.5/library/" target="_blank" rel="noopener noreferrer">Python documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. What <code>hyperion</code> can do, is already explained at <a href="/en/effects/api.html">Effect Engine API</a>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># Let's import our modules, so we can use them</span>
<span class="token keyword">import</span> hyperion<span class="token punctuation">,</span> time
<span class="token comment"># Create a loop, this loop runs until the user stops the effect</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> hyperion<span class="token punctuation">.</span>abort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># Here we are inside the loop, let's do something</span>
  <span class="token comment"># According to the documentation of hyperion.imageDrawPoint()</span>
  <span class="token comment"># The position of this point is 2 at x-axis and 5 at the y-axis with a thickness of 1 pixel and color red </span>
  hyperion<span class="token punctuation">.</span>imageDrawPoint<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment"># Now we need to tell Hyperion that we want to send the image we painted</span>
  hyperion<span class="token punctuation">.</span>imageShow<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment"># As we are still in our loop let's have a break to slow down the execution. We should never waste CPU power :)</span>
  <span class="token comment"># Sleep a second until the loop starts from the beginning</span>
  time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Recap:</strong>: First effect finished! We printed a red dot with a size of one pixel on an empty image and sent that to Hyperion.</p> <h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <p>Let's test our neweffect.py. Create a new file called <code>neweffect.json</code>. And place the following code inside</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My first own effect!&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;script&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;neweffect.py&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;args&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let's talk about what we have done here</p> <ul><li>The <code>neweffect.json</code> contains the configuration for our effect.</li> <li>The <code>name</code> property is the effect name which is displayed at the effect list and could be freely defined.</li> <li>The <code>script</code> property points to the python file it should start.</li> <li>The <code>args</code> property contains options and their values, for examaple a color, speed and so on. We leave this empty for the moment.</li></ul> <p><strong>After you added this file to your custom-effects folder, you need to restart Hyperion once</strong></p> <p>Now you should see the &quot;My first own effect!&quot; effect at the remote page effect list. Start the effect, you should see something like this at led visualization.
<div class="text-center img-margin"><img src="/images/en/owneff_1.jpg" alt="Custom Hyperion Effect" class="zoomable img-shadow"> <div class="no-mp sub-text">Custom Hyperion Effect</div></div></p> <p>According to the <a href="http://doc.qt.io/qt-5/coordsys.html#rendering" target="_blank" rel="noopener noreferrer">coordinate system<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, we are at 2 at the x-axis and 5 at the y-axis like written before. Perfect!</p> <h3 id="add-color-option"><a href="#add-color-option" class="header-anchor">#</a> Add color option</h3> <p>Now we want to make the color of the dot configurable. <br>
Let's edit the neweffect.py.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> hyperion<span class="token punctuation">,</span> time
<span class="token comment"># Let's get the value of option custom-color, values will be saved in the color variable</span>
color <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'custom-color'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> hyperion<span class="token punctuation">.</span>abort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># Get the color information from the variable color</span>
  hyperion<span class="token punctuation">.</span>imageDrawPoint<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  hyperion<span class="token punctuation">.</span>imageShow<span class="token punctuation">(</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>With <code>hyperion.args.get()</code> we grab the values from the neweffect.json that starts this python file (from the <code>args</code> property of the neweffect.json, which is currently empty.).</li> <li>The color array at the end of <code>hyperion.args.get('custom-color', (0,255,200))</code> is a fallback value as we don't deliver a <code>custom-color</code> property inside the args of the neweffect.json. This ensures always a working effect, choose these default values wisely.</li> <li>As you see the <code>hyperion.imageDrawPoint(...)</code> got also a modification, as we write the <code>custom-color</code> into the variable <code>color</code> we access the values with <code>color[0]</code> which is 0, <code>color[1]</code> which is 255 and <code>color[2]</code> which is 200.</li></ul> <p><strong>Save the neweffect.py and restart the effect, a restart of Hyperion is not required</strong> <br>
It should now look like this
<div class="text-center img-margin"><img src="/images/en/owneff_2.jpg" alt="Custom Hyperion Effect with cyan color" class="zoomable img-shadow"> <div class="no-mp sub-text">Custom Hyperion Effect with cyan color</div></div></p> <h3 id="more-dots"><a href="#more-dots" class="header-anchor">#</a> More dots!</h3> <p>Now we have a single dot, and we prepared the color for the dot to be configurable. Now we want more of them! <br>
Again we edit the neweffect.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> hyperion<span class="token punctuation">,</span> time<span class="token punctuation">,</span> random
color   <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'custom-color'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
iWidth  <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>imageWidth<span class="token punctuation">(</span><span class="token punctuation">)</span>
iHeight <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>imageHeight<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> hyperion<span class="token punctuation">.</span>abort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    hyperion<span class="token punctuation">.</span>imageDrawPoint<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>iWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>iHeight<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    hyperion<span class="token punctuation">.</span>imageShow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>We grab now the width (<code>hyperion.imageWidth()</code>) and height (<code>hyperion.imageHeight()</code>) of the image to make sure that we can fill the entire image with dots. For the required randomness we <a href="https://docs.python.org/3.5/library/random.html" target="_blank" rel="noopener noreferrer">import random<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and use <code>random.randint()</code> with a minimum value of 0 and a maximum value of our width and height. This creates random integer numbers.</li> <li>Keep in mind that the user setup has always a different width, height and even the ratio between them is dynamic based on the led layout.</li> <li><strong>Never use fixed positions, thickness,... calculate them always!</strong></li></ul> <p>So this is the image when we run the effect again.
<div class="text-center img-margin"><img src="/images/en/owneff_3.gif" alt="Custom Hyperion Effect with random dots" class="zoomable img-shadow"> <div class="no-mp sub-text">Custom Hyperion Effect with random dots</div></div></p> <p>Each second (remember the <code>sleep.time(1)</code>) it paints at a random position a new dot, endless. It doesn't check if there is already a dot, it just overwrites the old dot.</p> <h3 id="more-color"><a href="#more-color" class="header-anchor">#</a> More color</h3> <p>Let's add an option which force the effect to paint optional a random color for each dot instead always the same. <br>
Again we edit the neweffect.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> hyperion<span class="token punctuation">,</span> time<span class="token punctuation">,</span> random
<span class="token comment"># a helper function to convert HSV to RGB space</span>
<span class="token keyword">def</span> <span class="token function">hsv_to_rgb</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> s<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">if</span> s <span class="token operator">==</span> <span class="token number">0.0</span><span class="token punctuation">:</span> v<span class="token operator">*=</span><span class="token number">255</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> v<span class="token punctuation">,</span> v<span class="token punctuation">]</span>
  i <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>h<span class="token operator">*</span><span class="token number">6</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
  f <span class="token operator">=</span> <span class="token punctuation">(</span>h<span class="token operator">*</span><span class="token number">6</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">-</span>i<span class="token punctuation">;</span> p<span class="token punctuation">,</span>q<span class="token punctuation">,</span>t <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span><span class="token punctuation">(</span>v<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token operator">-</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span><span class="token punctuation">(</span>v<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token operator">-</span>s<span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token operator">*</span><span class="token punctuation">(</span>v<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token operator">-</span>s<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token operator">-</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> v<span class="token operator">*=</span><span class="token number">255</span><span class="token punctuation">;</span> i<span class="token operator">%=</span><span class="token number">6</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> t<span class="token punctuation">,</span> p<span class="token punctuation">]</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>q<span class="token punctuation">,</span> v<span class="token punctuation">,</span> p<span class="token punctuation">]</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>p<span class="token punctuation">,</span> v<span class="token punctuation">,</span> t<span class="token punctuation">]</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>p<span class="token punctuation">,</span> q<span class="token punctuation">,</span> v<span class="token punctuation">]</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>t<span class="token punctuation">,</span> p<span class="token punctuation">,</span> v<span class="token punctuation">]</span>
  <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token punctuation">[</span>v<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q<span class="token punctuation">]</span>
color       <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'custom-color'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
randomColor <span class="token operator">=</span> <span class="token builtin">bool</span><span class="token punctuation">(</span>hyperion<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'random-color'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
iWidth      <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>imageWidth<span class="token punctuation">(</span><span class="token punctuation">)</span>
iHeight     <span class="token operator">=</span> hyperion<span class="token punctuation">.</span>imageHeight<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">while</span> <span class="token keyword">not</span> hyperion<span class="token punctuation">.</span>abort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">if</span> randomColor<span class="token punctuation">:</span>
    color <span class="token operator">=</span> hsv_to_rgb<span class="token punctuation">(</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  hyperion<span class="token punctuation">.</span>imageDrawPoint<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>iWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>iHeight<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  hyperion<span class="token punctuation">.</span>imageShow<span class="token punctuation">(</span><span class="token punctuation">)</span>
  time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>To generate bright colors we write our own function: <code>def hsv_to_rgb(h, s, v): ...</code></li> <li>So we add also a new option <code>randomColor</code> which is True, we parse True/False values always as <code>bool(...)</code> to make sure they are really bool, and not a string. If you don't know what's the difference between a bool, string, int and float is, do a short browse at the <a href="https://docs.python.org/3.5/library/stdtypes.html" target="_blank" rel="noopener noreferrer">python documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Inside our <code>while not hyperion.abort():</code> loop we check with <code>if randomColor:</code> if randomColor is true or not, if it is true (enabled) we overwrite our variable <code>color</code> with a random color that is generated with <code>hsv_to_rgb(h,s,v)</code>. We just randomize h for Hue with our random function <code>hsv_to_rgb(random.uniform(0,1), 1, 1)</code>, the h accepts values between 0 and 1. What is hue? Play around with hue at <a href="https://www.w3schools.com/colors/colors_hsl.asp" target="_blank" rel="noopener noreferrer">this<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> colorpicker. You see why this is a easy way to generate bright colors with a simple random function.</li></ul> <p><strong>Save the file and restart the effect</strong> <div class="text-center img-margin"><img src="/images/en/owneff_4.gif" alt="Custom Hyperion Effect with random dots and color" class="zoomable img-shadow"> <div class="no-mp sub-text">Custom Hyperion Effect with random dots and color</div></div></p> <h3 id="clear-the-image"><a href="#clear-the-image" class="header-anchor">#</a> Clear the image</h3> <p>Let's add a option to set the image to black on a configurable interval in seconds. This overwrites all dots with black.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>I am sorry, more will come soon</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/hyperion-project/hyperion.ng/edit/master/docs/docs/en/effects/OurFirstEffect.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/10/2020, 4:24:04 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/effects/API.html" class="prev">
        Effect Engine API
      </a></span> <span class="next"><a href="/en/api/Ui.html">
        Graphical User Interface
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.a7719aba.js" defer></script><script src="/assets/js/2.16f09a8a.js" defer></script><script src="/assets/js/17.9ec82d3f.js" defer></script><script src="/assets/js/6.9367514b.js" defer></script><script src="/assets/js/4.a333783b.js" defer></script>
  </body>
</html>
